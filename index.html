<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI 智能工具平台</title>

  <!-- i18next 核心 -->
  <script src="https://unpkg.com/i18next@21.6.8/dist/umd/i18next.min.js"></script>

  <style>
    body {
      font-family: sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 2rem;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: #fff;
      border-radius: 8px;
      padding: 1.5rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    #lang-switcher {
      float: right;
      padding: 0.3em;
      font-size: 0.9em;
    }
    h1 {
      margin-top: 0;
    }
    form { margin-top: 2rem; }
    input, textarea {
      width: 100%;
      padding: 0.8em;
      margin-bottom: 1em;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1em;
      box-sizing: border-box;
    }
    button {
      width: 100%;
      padding: 1em;
      font-size: 1.1em;
      color: #fff;
      background: #007bff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:disabled { background: #999; cursor: not-allowed; }
    #chat-output {
      margin-top: 1.5rem;
      padding: 1em;
      background: #f8f9fa;
      border-radius: 6px;
      min-height: 4em;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- 语言下拉 -->
    <select id="lang-switcher"></select>

    <h1 id="site-title"></h1>

    <form id="chat-form">
      <input id="email" type="email" required />
      <textarea id="message" rows="4" required></textarea>
      <button id="send-btn" type="submit"></button>
    </form>

    <div id="chat-output"></div>
  </div>

  <script>
  // —— 1. 先初始化 i18next —— 
  i18next.init({
    lng: 'en',                // 默认语言
    fallbackLng: 'en',        // 找不到时回退
    resources: {
      en: { translation: {
        title:       'AI Chat Assistant',
        emailPH:     'Enter your email',
        msgPH:       'Type your question',
        sendBtn:     'Send',
        paidNotice:  'You’ve exhausted your free quota. Please subscribe to unlock more.',
      }},
      zh: { translation: {
        title:       'AI 智能工具平台',
        emailPH:     '请输入你的邮箱',
        msgPH:       '请输入你的问题',
        sendBtn:     '发送',
        paidNotice:  '免费次数已用完，请付费解锁更多次数。',
      }},
      es: { translation: {
        title:       'Asistente de IA',
        emailPH:     'Ingresa tu correo',
        msgPH:       'Escribe tu pregunta',
        sendBtn:     'Enviar',
        paidNotice:  'Has agotado tu cuota gratuita. Suscríbete para más.',
      }},
      ar: { translation: {
        title:       'مساعد الذكاء الاصطناعي',
        emailPH:     'أدخل بريدك الإلكتروني',
        msgPH:       'اكتب سؤالك',
        sendBtn:     'إرسال',
        paidNotice:  'لقد استنفدت حصتك المجانية. يرجى الاشتراك للمزيد.',
      }},
      ru: { translation: {
        title:       'ИИ Ассистент',
        emailPH:     'Введите вашу почту',
        msgPH:       'Введите ваш вопрос',
        sendBtn:     'Отправить',
        paidNotice:  'Ваш бесплатный лимит истек. Подпишитесь для продолжения.',
      }},
      ja: { translation: {
        title:       'AI チャットアシスタント',
        emailPH:     'メールアドレスを入力',
        msgPH:       '質問を入力してください',
        sendBtn:     '送信',
        paidNotice:  '無料利用回数を使い切りました。サブスクライブしてください。',
      }},
      pt: { translation: {
        title:       'Assistente de IA',
        emailPH:     'Digite seu e-mail',
        msgPH:       'Digite sua pergunta',
        sendBtn:     'Enviar',
        paidNotice:  'Você esgotou sua cota gratuita. Assine para continuar.',
      }},
      hi: { translation: {
        title:       'एआई चैट सहायक',
        emailPH:     'अपना ईमेल दर्ज करें',
        msgPH:       'अपना प्रश्न लिखें',
        sendBtn:     'भेजें',
        paidNotice:  'आपकी नि:शुल्क सीमा समाप्त हो चुकी है। अधिक के लिए सदस्यता लें।',
      }},
      de: { translation: {
        title:       'KI-Chat-Assistent',
        emailPH:     'Gib deine E-Mail ein',
        msgPH:       'Gib deine Frage ein',
        sendBtn:     'Senden',
        paidNotice:  'Dein Gratis-Kontingent ist aufgebraucht. Bitte abonniere für mehr.',
      }},
      fr: { translation: {
        title:       'Assistant IA',
        emailPH:     'Entrez votre e-mail',
        msgPH:       'Tapez votre question',
        sendBtn:     'Envoyer',
        paidNotice:  'Votre quota gratuit est épuisé. Abonnez-vous pour continuer.',
      }},
      /* 你可以在这里继续添加更多语言：
      es, ar, ru, ja, pt, hi, de, fr, bn, it, tr, vi, ko, nl, pl, th…
      */
    }
  }, function(err, t) {
    // 初始化完成后渲染一次
    updateContent();
  });


  // —— 2. 准备下拉列表 —— 
  const LANGS = [
    ['en','English'],
    ['zh','简体中文'],
    ['es','Español'],
    ['ar','العربية'],
    ['ru','Русский'],
    ['ja','日本語'],
    ['pt','Português'],
    ['hi','हिन्दी'],
    ['de','Deutsch'],
    ['fr','Français'],
    ['it','Italiano'],
    ['tr','Türkçe'],
    ['vi','Tiếng Việt'],
    ['ko','한국어'],
    ['nl','Nederlands'],
    ['pl','Polski'],
    ['th','ภาษาไทย'],
    // …如果要更多语言，加到这里即可
  ];

  const sel = document.getElementById('lang-switcher');
  LANGS.forEach(([code,name])=>{
    const opt = document.createElement('option');
    opt.value = code;
    opt.textContent = name;
    sel.appendChild(opt);
  });
  sel.value = i18next.language;    // 设为当前
  sel.onchange = () => {
    i18next.changeLanguage(sel.value, updateContent);
  };


  // —— 3. 把翻译填到页面上 —— 
  function updateContent() {
    document.documentElement.lang = i18next.language;
    document.getElementById('site-title').textContent = i18next.t('title');
    document.getElementById('email').placeholder    = i18next.t('emailPH');
    document.getElementById('message').placeholder  = i18next.t('msgPH');
    document.getElementById('send-btn').textContent = i18next.t('sendBtn');
    // ……用同样方法，更改“付费提示”等……
  }

  // （后续再加你的表单拦截、fetch、KV 计数逻辑就能在多语环境下一起工作）
  </script>
</body>
</html>
